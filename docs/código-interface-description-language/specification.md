---
sidebar_position: 1
---

# Specification

## Overview
Codigo Generator is a set of tools and engines to generate “Smart Contracts” stubs, Client code and documentation from a **Codigo’s Interface Description Language** or **CIDL** file.

“**Smart Contract**” stubs are generated in full source, verified and audited, code. Developers will need to only implement the business logic for each stub, avoiding the repetitive boilerplate code for validation, verification and parsing.

**Client Code** generation supports multiple programming languages. It takes a **CIDL** as input and generates full client compilable code. The client code includes all the necessary elements to call the Smart Contract methods through the underlying Blockchain.

Interacting with a Smart Contract is already possible via the RPC interfaces exposed by Blockchains Clients and Validators. However, writing the boilerplate code that translates a programming language construct into RPC calls and back is time consuming, prone to errors  and brittle - implementation bugs and security vulnerabilities can only be detected during runtime.

## Goals

Codigo’s main goal is to speed Blockchain adoption by enabling Developers to focus on their business logic while Codigo Generator takes care of all the rest.

1. **Generates “Smart Contract” boilerplate and stubs**
Codigo Generator abstracts all the initialization, validation, verification and parsing for each incoming request, and routes the call to the specific stub method with all parameters validated and sanitized.

2. **Generates Client Libraries**
Codigo Generators simplifies Smart Contract adoption by generating “Smart Contract” client libraries in multiple programming languages. Method calls are abstracted behind a simple API interface. All the boilerplate code to generate the actual Blockchain Smart Contract call is automatically generated by Codigo Generators for each programming language. 

3. **Documentation**
Codigo Generators creates full Smart Contract documentation based on the CIDL file.
This documentation will list all exposed methods by the Smart Contract and input parameters. For Account based VMs, like Solana, full account structure is documented as well.
The details of the documentation are an integral part of the CIDL file.

## High Level Schematic Diagram

| ![High Level Schematic Diagram](../../static/img/high_level_schematic_diagram.png) |
|:----------------------------------------------------------:|

## Codigo’s Interface Description Language CIDL
CIDL is a work in progress, open initiative to standardize how Smart Contracts Interfaces and data structures are described. Similar to OpenAPI ( Swagger ) for Web2 RESTful API design.

The Codigo Interface Description Language defines a, programming language-agnostic, interface description for Smart Contract Interfaces and custom data types, which allows both humans and computers to discover and understand the capabilities of a Smart Contract without requiring access to source code, additional documentation, or reverse engineering. The CIDL Specification removes guesswork in calling a Smart Contract.

## CIDL Schema Definition

:::caution
Work in Progress!!!
:::

```yaml
cidl: CIDL version
info:
  name: smart contract name 
  title: title or name of the smart contract
  version: version of the smart contract
  summary: smart contract description summary
  contact:
    name: contact name | company
    web: url of company | support
    email: email of contact | support
    git: git URL
  license:
    name: license name
    identifier: SPDX license expression
    url: license URL

imports: # Array external CIDLs
- ref: name | name to be referenced inside this document. 
  loc: url [ local file system, https, github ]
  progid: pubkey | ID of the Program generated by the external CIDL

types:
  <type-name>: # Identifier for this Structure
    summary: type description summary
    solana: 
      owner: Owner's program id; Expected Owner of the account
      seeds: # Array of seeds
    fields: # Array of fields
    - name: field name
      type:  [native, extended]
      description: field description
      format: # The format of this field: [date-time, key, etc]  
      attributes: # [max: nn, min: nn]
      solana:
        attributes: # [cap: nn]

methods: # Array of methods | instructions
- name: method name 
  version: version of this method
  summary: description of this API
  solana:
  signers: # Array of signers
inputs: # Array of inputs
  - name: # The Input parameter name
    type: [native, type, extended]
    description: short description of this input parameter
    solana: # Solana extension for this input
      attributes: [mut, init, init_if_needed]
      seeds: # Array of params refs
      rent-payer: # A valid signer other than fee-payer

errors: # Array - Custom Errors definition
- id: Error identifier
  msg: Error message 
```

### General Section
In this section the developer defines Smart Contract general settings, such as Smart Contract Name, Version and a full description of the Smart Contract capabilities to be parsed by the Documentation Generator.

### CIDL

| CIDL | String | ***Required*** [Semantic version](https://docs.npmjs.com/about-semantic-versioning) of the specification used in the document |
|------|--------|---------------------------------------------------------------------|

**CIDL Sample**
```
cidl: '0.1'
```

## Info

### Info Schema (Required)

```
info:
  name: smart contract name 
  title: title or name of the smart contract
  version: version of the smart contract
  summary: smart contract description summary
  contact:
    name: contact name | company
    web: url of company | support
    email: email of contact | support
    git: git URL
  license:
    name: license name
    identifier: SPDX license expression
    url: license URL
```

### Info Object 

| **Field Name** | **Type**         | **Notes**                                                                                      |
|----------------|------------------|------------------------------------------------------------------------------------------------|
| **name**       | String           | **Required** The Contract name. This name can be used as reference                                          |
| **title**      | String \| Markup | **Required** The title will be used to generate Documentation for the Smart contract defined in this CIDL   |
| **version**    | String           | **Required** [Semantic version](https://docs.npmjs.com/about-semantic-versioning) of the specification used in this document                                    |
| **summary**    | String \| Markup | **Recommended** The summary will be used to generate Documentation for the Smart contract defined in this CIDL |
| **contact**    | Object           | **Optional**                                                                                   |
| **license**    | Object           | **Optional**                                                                                   |

### Contact Object

The contact object defines the Owner of the CIDL and its contact information

| **Field Name** | **Type**               | **Notes**                                                                        |
|----------------|------------------------|----------------------------------------------------------------------------------|
| **name**       | String                 | **Optional** Name of this CIDL maintainer. It can represent an individual or an organization. |
| **web**        | URL                    | **Optional** Website url of the CIDL maintainer.                                              |
| **email**      | String \| email format | **Optional**                                                                     |
| **git**        | String \| git URL      | **Optional** Git URL of this CIDL repository                                         |
                                                                |
### License Object
This object defines the license governing this CIDL.

| **Field Name** | **Type**      | **Notes**                                                                 |
|----------------|---------------|---------------------------------------------------------------------------|
| **name**       | String        | **Required** The license name used for the CIDL.                                       |
| **identifier** | String        | **Optional** An [SPDX](https://spdx.org/spdx-specification-21-web-version#h.jxpfx0ykyb60) license expression for the API.                                   |
| **url**        | String \| URL | **Optional** A URL to the license used for the API. This MUST be in the form of a URL. |

:::info
Between identifier and url, only one is required.
:::

### Info Object Sample

```
info: # Smart Contract Information
  name: LamportTransfer
  title: Transfer Lamports between 2 accounts
  version: '0.5'
  summary: |
    # Welcome to the Transfer Program
    This Program **Transfers** Lamport between two Solana Accounts
  contact: # Contact information of the creator
    name: 123 Transfer LLC
    web: https://123Transfer.com/support
    email: support@123transfer.com
    git: https://github.com/123transfer
  license: # License of the Smart Contract Code
    name: Apache 2.0
    identifier: Apache-2.0
``` 

## Imports

This section defines how to import external CIDL to be reused while defining a new interface.
External CIDL locations can be versioned, to lock a specific version of a CIDL, or generic, pointing to the latest version ( not recommended ). To be supported in future versions.

### Imports Schema (Optional)

```
imports: # Array external CIDLs
- ref: name | name to be referenced inside this document. 
  loc: url [ local file system, https, github ] 
```

### Imports Array

| **imports** | Array [Import Object] | **Optional** |
|-------------|-----------------------|--------------|

### Import Object

| **Field Name** | Type          | Notes                                                                                                                                                                               |
|----------------|---------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **ref**        | String        | **Required** Reference name. Used as a prefix when an element of this CIDL is used locally. Each ref has to be unique                                                                            |
| **loc**            | String \| URL | **Required** Location of the CIDL. The location can be: Local File System, URL (GitHub, HTTP), CIDL Hub. Locations can include a version indicator to lock the external CIDL to a stable version |
| **solana**         | object        | **Optional** Extensions needed to support the Solana Blockchain                                                                                                                                  |

### Solana Object 

| Field Name | Type                  | Notes                                                                             |
|------------|-----------------------|-----------------------------------------------------------------------------------|
| progid     | String Format: pubkey | The Program ID ( as a Public Key ) of the Program generated by the imported CIDL. |

### Imports Sample

```
imports: # Array external CIDLs
- ref: token # The Token Program
  loc: https://github.com/codigoai/cidls/token@version
  progid: TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb
- ref: nftcore # NFT Core Smart Program
  loc: cidl://nftcore@v2 # CIDL Hub
  progid: NFTpsVeCiPHMUAtzQWZw7RjsKjgCjhwU55QGu4U1Szw

methods:
- transfer:
  version: 1.0
  summary: transfer for a token account
  inputs:
  - name: srcAccount
    type: token.TokenAccount       # Referencing an imported CIDL
    description: source account
```

## Types

This section defines new Data Structures. These structures are referenced by methods. In this current version we support only Accounts types.

### Types Schema (Optional)

```
types:
  <type-name>: # Identifier for this Structure
    summary: account description summary
    solana: 
      owner: Owner's program id; Expected Owner of the account
      seeds: # Array of seeds
    fields: # Array of fields
    - name: field name
      type:  [native, extended]
      description: field description
      format: # The format of this field: [date-time, key, etc]  
      attributes: # [max: nn, min: nn]
      solana:
        attributes: # [cap: nn]
```

### Types Map

| Field Name | Type                           | Notes                                                                             |            |
|------------|--------------------------------|-----------------------------------------------------------------------------------|
| types      | Map [ type name, type object ] | This section is optional. SmartContract may work on existing, native or extended, data types |

### Type-name Key

| Type name &lt;type-name&gt; | String It has to comply with the Smart Contract Data Structure naming policies. | The Type name is, the key to the type object map, is used to identify the data structure within the Method definition. This identifier will also become the name for the SmartContract Data Structure to be referenced within the code. |
|-----------------------|---------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|

### Type Object

| Field Name | Type             | Notes                                       |
|------------|------------------|---------------------------------------------|
| **summary**    | String \| markup | **Recommended** Documentation summary of the Data Structure |
| **solana**     | Solana Extension Object for Type           | **Optional** (relevant if Target Blockchain is Solana) To define Solana Extensions for this Data Structure. This defined the Structure as a Solana Account |
| **fields**     | Array [Field Object] | **Required** |

### Solana Extension Object for Type

| Field Name | Type             | Notes                                       |
|------------|------------------|---------------------------------------------|
| **owner**    | String \| sol: pubkey | *To be supported in future versions:* **Optional** The Program identifier( Pubkey) that Owns this Account. Codigo will add runtime checks to validate that the right account’s owner matches this field. If this field is ignored or set as **self**, the check is done with the current program id.|
| **seeds**    | Array [Seed Object] | **Optional** Required for PDA accounts. |

### Seed Object

| Field Name | Type             | Notes                                       |
|------------|------------------|---------------------------------------------|
| **name**    | fixed string | **Required** Seed name could be interpreted as: a seed name with a type, a fixed string seed value |
| **type**    | Account reference \| native type | **Optional** Seed type definition |






[//]: # (#### Documentation detectives wanted! If you've spotted any gaps or have suggestions to level up our documentation game, we'd love to hear from you!)

[//]: # ()
[//]: # ([![Button Example]][Link])

[//]: # ()
[//]: # ([Link]: https://docs.google.com/forms/d/e/1FAIpQLSe8juhl22lxyvNi54GN_TX4yzooxOq5qE98sxh2CXhFxO9Dyw/viewform)

[//]: # ()
[//]: # ([Button Example]: https://img.shields.io/badge/Feedback-FD971F?style=for-the-badge)