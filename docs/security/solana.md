---
sidebar_position: 1
---

# Solana

Security has been an integral part of C贸digo Generator from the beginning. This document will go through the security
checks generated.

## Verify Signers

This security check is generated by default for all methods defined in the CIDL. You can find the usage of this
verification in the `processor.rs` file of the generated smart contract within each function that starts
with `process_`.

- Given the following portion of CIDL

```yaml showLineNumbers
methods:
  - name: create_user_record
    summary: To call once per account. Initialize a Record account. The total_balance of the account will be set to 0.
    solana:
      signers:
        - name: fee_payer
    inputs:
      - name: user_record
        type: Record
        solana:
          attributes: [ init ]
          seeds:
            signer: fee_payer
      - name: user_name
        type: string
        description: The username to be assigned to the Record.name property
```

- We can see in `process_create_user_record` function the following check was generated:

```rust showLineNumbers
pub fn process_create_user_record(/* ... */) -> ProgramResult {
    //...

    if fee_payer_info.is_signer != true {
        return Err(ValidateBudgetTrackerError::InvalidSignerPermission.into());
    }

    //...
}
```

## Verify Ownership

Is generated by default for all accounts used within a method. You can find the usage of this verification in
the `processor.rs` file of the generated smart contract within each function that starts with `process_`.

- Given the following portion of CIDL

```yaml showLineNumbers
methods:
  - name: register_outcome
    summary: Register the given amount as an outcome for the given record account. The total total_balance of the account will be decreased.
    solana:
      signers:
        - name: fee_payer
    inputs:
      - name: user_record
        type: Record
        description: The user record account
        solana:
          attributes: [ mut ]
          seeds:
            signer: fee_payer
      - name: amount
        type: u32
        description: Number to be added to the outcome accumulator
```

- We can see in `process_register_outcome` function the following check was generated:

```rust showLineNumbers
pub fn process_register_outcome(/* ... */) -> ProgramResult {
    //...

    // PDA account ownership check is done by deriving the PDA and verifying the address
    // against the one it was passed
    let (user_record_pubkey, user_record_bump) = Pubkey::find_program_address(
        &[b"record", fee_payer_info.key.as_ref(), user_record_seed_index.to_le_bytes().as_ref()],
        program_id,
    );

    if *user_record_info.key != user_record_pubkey {
        return Err(ValidateBudgetTrackerError::NotExpectedAddress.into());
    }

    if *fee_payer_info.owner != Pubkey::from_str("11111111111111111111111111111111").unwrap() {
        return Err(ValidateBudgetTrackerError::WrongAccountOwner.into());
    }

    //...
}
```

To learn more about ownership
click [here](../c贸digo-interface-description-language/blockchain-extensions/solana/data-types.md#ownership)

## Verify Account Length

Is generated by default for all accounts used within a method. You can find the usage of this verification in
the `processor.rs` file of the generated smart contract within each function that starts with `process_`.

- Given the following portion of CIDL

```yaml showLineNumbers
methods:
  - name: register_income
    summary: Register the given amount as an income for the given record account. The total total_balance of the account will be increased.
    solana:
      signers:
        - name: fee_payer
    inputs:
      - name: user_record
        type: Record
        solana:
          attributes: [ mut ]
          seeds:
            signer: fee_payer
      - name: amount
        type: u32
        description: The amount to be registered as the income.
```

- We can see in `process_register_income` function the following check was generated:

```rust showLineNumbers
pub fn process_register_income(/* ... */) -> ProgramResult {
    //...

    if user_record_info.data_len() != Record::LEN {
        return Err(ValidateBudgetTrackerError::InvalidAccountLen.into());
    }

    //...
}
```

To learn more about account length
click [here](../c贸digo-interface-description-language/blockchain-extensions/solana/data-types.md#account-length)

## Next steps

**Congratulations!**  at this point, you should have a basic understanding of security checks generated for a solana
contract. To summarize what we learned:

- C贸digo Generator guarantees the generation of security checks, even if the developer doesnt specify it.

These links may help you on your journey to writing smart contracts with the CIDL:

- [Learning the Basic](../c贸digo-interface-description-language/learning-the-basics.md)
- [Part I - Building Solana Programs](../guides/part-1-building-solana-programs.md)

### Join the C贸digo community 

C贸digo is a growing community of developers. Join us on
**[Discord](https://discord.gg/8XHQGS832k)**
and **[GitHub](https://github.com/Codigo-io)**

#### Documentation detectives wanted! If you've spotted any gaps or have suggestions to level up our documentation game, we'd love to hear from you!

[![Button Example]][Link]
[Link]: https://docs.google.com/forms/d/e/1FAIpQLSeXhUGNoDCEq2sdm9r1wQRK7JP1x1d-YvDqFOPw-GyPgfB20Q/viewform
[Button Example]: https://img.shields.io/badge/Feedback-FD971F?style=for-the-badge